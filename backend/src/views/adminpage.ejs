<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Admin Panel</title>
    <style>
      body {
        font-family: Arial;
        margin: 30px;
      }
      .movie {
        border: 1px solid #ccc;
        padding: 10px;
        margin-bottom: 15px;
      }
      img {
        width: 200px;
        height: 120px;
        object-fit: cover;
      }
      button {
        margin-right: 10px;
      }
    </style>
  </head>

  <body>
    <h1>Admin Panel</h1>

    <!-- ================= CREATE MOVIE ================= -->
    <h2>Upload Movie</h2>

    <form action="/movie/entry" method="POST" enctype="multipart/form-data">
      <input
        type="text"
        name="title"
        placeholder="Title"
        required
      /><br /><br />
      <textarea name="description" placeholder="Description" required></textarea
      ><br /><br />
      <input
        type="text"
        name="genre"
        placeholder="Genre"
        required
      /><br /><br />
      <input
        type="number"
        name="releaseYear"
        placeholder="Release Year"
        required
      /><br /><br />
      <input
        type="number"
        name="duration"
        placeholder="Duration"
        required
      /><br /><br />
      <input type="text" name="language" value="English" /><br /><br />

      <label>Video</label><br />
      <input type="file" name="video" required /><br /><br />

      <label>Thumbnail</label><br />
      <input type="file" name="thumbnail" required /><br /><br />

      <button type="submit">Upload Movie</button>
    </form>

    <hr />

    <!-- ================= MOVIE LIST ================= -->
    <h2>Existing Movies</h2>

    <% if (movies.length === 0) { %>
    <p>No movies uploaded yet.</p>
    <% } %> <% movies.forEach(movie => { %>
    <div class="movie">
      <img src="<%= movie.thumbnailUrl %>" />
      <h3><%= movie.title %></h3>
      <p><%= movie.genre %> | <%= movie.releaseYear %></p>

      <!-- EDIT -->
      <a href="/admin/edit/<%= movie._id %>">
        <button>Edit</button>
      </a>

      <!-- DELETE -->
      <form
        action="/movie/<%= movie._id %>?_method=DELETE"
        method="POST"
        style="display: inline"
      >
        <button style="background: red; color: white">Delete</button>
      </form>
    </div>
    <% }) %>

    <br />
    <a href="/">Back to Home</a>
  </body>
</html>
